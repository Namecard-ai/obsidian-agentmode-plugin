---
globs: *.ts,*.tsx,*.js,*.jsx,*.css,*.md
description: Obsidian plugin development standards and best practices
---

# Obsidian Plugin Development Standards

This is an Obsidian plugin written in TypeScript/React. This document outlines development standards, best practices, and lifecycle management guidelines.

## Language Requirements

### UI Text and Messages
- All user-facing text must be in English
- Error messages should be in English
- Button labels, tooltips, and notifications must be in English
- Console logs and debug messages should be in English

### Code Comments
- All code comments must be written in English
- Function and class documentation should be in English
- TODO comments and inline explanations must be in English

### File and Variable Naming
- Use descriptive English names for variables, functions, and classes
- Follow camelCase convention for TypeScript/JavaScript
- Use clear, self-documenting names

## Code Style Guidelines

### TypeScript/React Best Practices
- Use TypeScript interfaces for type definitions
- Prefer functional components with hooks
- Use proper error handling with try-catch blocks
- Keep components small and focused on single responsibility

### Variable Declarations
- **Never use `var`** - always use `const` or `let` instead
- Use `const` for variables that won't be reassigned
- Use `let` for variables that will be reassigned
- `var` has function-level scope which can lead to bugs - modern JavaScript uses block-level scope with `const`/`let`

### Documentation
- Add JSDoc comments for complex functions
- Document component props and their types
- Include usage examples in comments when helpful

## Obsidian Plugin Lifecycle Management

### Event and Interval Registration
- Use `this.registerDomEvent()` for global DOM events to ensure automatic cleanup when plugin is disabled
- Use `this.registerInterval()` for intervals to ensure automatic cleanup when plugin is disabled
- These registration methods prevent memory leaks by automatically removing listeners/intervals on plugin shutdown

Example patterns:
```typescript
// DOM event registration - automatically cleaned up
this.registerDomEvent(document, 'click', (evt: MouseEvent) => {
    console.log('click', evt);
});

// Interval registration - automatically cleaned up
this.registerInterval(window.setInterval(() => {
    console.log('periodic task');
}, 5 * 60 * 1000));
```

## Project Structure
- Main plugin entry: [main.ts](mdc:main.ts)
- React components: [AgentChatView.tsx](mdc:AgentChatView.tsx), [LoginComponent.tsx](mdc:LoginComponent.tsx)
- Styles: [styles.css](mdc:styles.css)
- Configuration: [manifest.json](mdc:manifest.json)